transform = "CommentTransfer"
identifier = "lh_table_lookup_ex"
model = "gemini-3-flash-preview"
response = """```rust
#[no_mangle]
pub unsafe extern "C" fn lh_table_lookup_ex(
    mut t: *mut crate::src::linkhash::lh_table,
    mut k: *const ::core::ffi::c_void,
    mut v: *mut *mut ::core::ffi::c_void,
) -> json_bool {
    let mut e: *mut crate::src::linkhash::lh_entry = lh_table_lookup_entry(t, k);
    if !e.is_null() {
        if !v.is_null() {
            *v = (*e).v as uintptr_t as *mut ::core::ffi::c_void;
        }
        return 1 as json_bool; /* key found */
    }
    if !v.is_null() {
        *v = NULL;
    }
    return 0 as json_bool; /* key not found */
}
```"""

[[messages]]
role = "user"
content = """Transfer the comments from the following C function to the corresponding Rust function.
Do not add any comments that are not present in the C function.
Use Rust doc comment syntax (///) where appropriate (e.g., for function documentation).
Respond with the Rust function definition with the transferred comments; say nothing else.

C function:
```c
json_bool lh_table_lookup_ex(struct lh_table* t, const void* k, void **v)
{
\tstruct lh_entry *e = lh_table_lookup_entry(t, k);
\tif (e != NULL) {
\t\tif (v != NULL) *v = lh_entry_v(e);
\t\treturn 1; /* key found */
\t}
\tif (v != NULL) *v = NULL;
\t\treturn 0; /* key not found */
}```

Rust function:
```rust
#[no_mangle]

pub unsafe extern "C" fn lh_table_lookup_ex(
    mut t: *mut crate::src::linkhash::lh_table,
    mut k: *const ::core::ffi::c_void,
    mut v: *mut *mut ::core::ffi::c_void,
) -> json_bool {
    let mut e: *mut crate::src::linkhash::lh_entry = lh_table_lookup_entry(t, k);
    if !e.is_null() {
        if !v.is_null() {
            *v = (*e).v as uintptr_t as *mut ::core::ffi::c_void;
        }
        return 1 as json_bool;
    }
    if !v.is_null() {
        *v = NULL;
    }
    return 0 as json_bool;
}```
"""
