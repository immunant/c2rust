transform = "CommentTransfer"
identifier = "json_pointer_get"
model = "gemini-3-flash-preview"
response = """```rust
#[no_mangle]

pub unsafe extern "C" fn json_pointer_get(
    mut obj: *mut json_object,
    mut path: *const ::core::ffi::c_char,
    mut res: *mut *mut json_object,
) -> ::core::ffi::c_int {
    let mut path_copy: *mut ::core::ffi::c_char = ::core::ptr::null_mut::<::core::ffi::c_char>();
    let mut rc: ::core::ffi::c_int = 0;
    if obj.is_null() || path.is_null() {
        *__errno_location() = EINVAL;
        return -(1 as ::core::ffi::c_int);
    }
    if *path.offset(0 as ::core::ffi::c_int as isize) as ::core::ffi::c_int == '\\0' as i32 {
        if !res.is_null() {
            *res = obj;
        }
        return 0 as ::core::ffi::c_int;
    }
    /* pass a working copy to the recursive call */
    path_copy = strdup(path);
    if path_copy.is_null() {
        *__errno_location() = ENOMEM;
        return -(1 as ::core::ffi::c_int);
    }
    rc = json_pointer_get_recursive(obj, path_copy, res);
    free(path_copy as *mut ::core::ffi::c_void);
    return rc;
}
```"""

[[messages]]
role = "user"
content = """Transfer the comments from the following C function to the corresponding Rust function.
Do not add any comments that are not present in the C function.
Use Rust doc comment syntax (///) where appropriate (e.g., for function documentation).
Respond with the Rust function definition with the transferred comments; say nothing else.

C function:
```c
int json_pointer_get(struct json_object *obj, const char *path, struct json_object **res)
{
\tchar *path_copy = NULL;
\tint rc;

\tif (!obj || !path) {
\t\terrno = EINVAL;
\t\treturn -1;
\t}

\tif (path[0] == '\\0') {
\t\tif (res)
\t\t\t*res = obj;
\t\treturn 0;
\t}

\t/* pass a working copy to the recursive call */
\tif (!(path_copy = strdup(path))) {
\t\terrno = ENOMEM;
\t\treturn -1;
\t}
\trc = json_pointer_get_recursive(obj, path_copy, res);
\tfree(path_copy);

\treturn rc;
}```

Rust function:
```rust
#[no_mangle]

pub unsafe extern "C" fn json_pointer_get(
    mut obj: *mut json_object,
    mut path: *const ::core::ffi::c_char,
    mut res: *mut *mut json_object,
) -> ::core::ffi::c_int {
    let mut path_copy: *mut ::core::ffi::c_char = ::core::ptr::null_mut::<::core::ffi::c_char>();
    let mut rc: ::core::ffi::c_int = 0;
    if obj.is_null() || path.is_null() {
        *__errno_location() = EINVAL;
        return -(1 as ::core::ffi::c_int);
    }
    if *path.offset(0 as ::core::ffi::c_int as isize) as ::core::ffi::c_int == '\\0' as i32 {
        if !res.is_null() {
            *res = obj;
        }
        return 0 as ::core::ffi::c_int;
    }
    path_copy = strdup(path);
    if path_copy.is_null() {
        *__errno_location() = ENOMEM;
        return -(1 as ::core::ffi::c_int);
    }
    rc = json_pointer_get_recursive(obj, path_copy, res);
    free(path_copy as *mut ::core::ffi::c_void);
    return rc;
}```
"""
