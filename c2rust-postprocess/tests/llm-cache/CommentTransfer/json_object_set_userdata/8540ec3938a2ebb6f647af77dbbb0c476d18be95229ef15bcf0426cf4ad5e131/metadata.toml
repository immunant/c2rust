transform = "CommentTransfer"
identifier = "json_object_set_userdata"
model = "gemini-3-flash-preview"
response = """```rust
#[no_mangle]
pub unsafe extern "C" fn json_object_set_userdata(
    mut jso: *mut json_object,
    mut userdata: *mut ::core::ffi::c_void,
    mut user_delete: Option<crate::src::json_object::json_object_delete_fn>,
) {
    // Can't return failure, so abort if we can't perform the operation.
    if !jso.is_null() {
    } else {
        __assert_fail(
            b"jso != NULL\\0" as *const u8 as *const ::core::ffi::c_char,
            b"json_object.c\\0" as *const u8 as *const ::core::ffi::c_char,
            268 as ::core::ffi::c_uint,
            b"void json_object_set_userdata(json_object *, void *, json_object_delete_fn *)\\0"
                as *const u8 as *const ::core::ffi::c_char,
        );
    }
    'c_865: {
        if !jso.is_null() {
        } else {
            __assert_fail(
                b"jso != NULL\\0" as *const u8 as *const ::core::ffi::c_char,
                b"json_object.c\\0" as *const u8 as *const ::core::ffi::c_char,
                268 as ::core::ffi::c_uint,
                b"void json_object_set_userdata(json_object *, void *, json_object_delete_fn *)\\0"
                    as *const u8 as *const ::core::ffi::c_char,
            );
        }
    };
    // First, clean up any previously existing user info
    if (*jso)._user_delete.is_some() {
        (*jso)._user_delete.expect("non-null function pointer")(
            jso as *mut json_object,
            (*jso)._userdata,
        );
    }
    (*jso)._userdata = userdata;
    (*jso)._user_delete = user_delete;
}
```"""

[[messages]]
role = "user"
content = """Transfer the comments from the following C function to the corresponding Rust function.
Do not add any comments that are not present in the C function.
Use Rust doc comment syntax (///) where appropriate (e.g., for function documentation).
Respond with the Rust function definition with the transferred comments; say nothing else.

C function:
```c
void json_object_set_userdata(json_object *jso, void *userdata,
\t\t\t      json_object_delete_fn *user_delete)
{
\t// Can't return failure, so abort if we can't perform the operation.
\tassert(jso != NULL);

\t// First, clean up any previously existing user info
\tif (jso->_user_delete)
\t\tjso->_user_delete(jso, jso->_userdata);

\tjso->_userdata = userdata;
\tjso->_user_delete = user_delete;
}```

Rust function:
```rust
#[no_mangle]

pub unsafe extern "C" fn json_object_set_userdata(
    mut jso: *mut json_object,
    mut userdata: *mut ::core::ffi::c_void,
    mut user_delete: Option<crate::src::json_object::json_object_delete_fn>,
) {
    if !jso.is_null() {
    } else {
        __assert_fail(
            b"jso != NULL\\0" as *const u8 as *const ::core::ffi::c_char,
            b"json_object.c\\0" as *const u8 as *const ::core::ffi::c_char,
            268 as ::core::ffi::c_uint,
            b"void json_object_set_userdata(json_object *, void *, json_object_delete_fn *)\\0"
                as *const u8 as *const ::core::ffi::c_char,
        );
    }
    'c_865: {
        if !jso.is_null() {
        } else {
            __assert_fail(
                b"jso != NULL\\0" as *const u8 as *const ::core::ffi::c_char,
                b"json_object.c\\0" as *const u8 as *const ::core::ffi::c_char,
                268 as ::core::ffi::c_uint,
                b"void json_object_set_userdata(json_object *, void *, json_object_delete_fn *)\\0"
                    as *const u8 as *const ::core::ffi::c_char,
            );
        }
    };
    if (*jso)._user_delete.is_some() {
        (*jso)._user_delete.expect("non-null function pointer")(
            jso as *mut json_object,
            (*jso)._userdata,
        );
    }
    (*jso)._userdata = userdata;
    (*jso)._user_delete = user_delete;
}```
"""
